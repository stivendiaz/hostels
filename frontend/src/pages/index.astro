---
import PropertyCard from '../components/landing/PropertyCard';
import SearchBar from '../components/landing/SearchBar.vue';
import LandingLayout from '../layouts/user/Landing.astro';

import type PropertyModel from '../types/property';
import { propertyApi } from '../api/ApiBuilder';

const properties = await propertyApi.getAll();

export async function getStaticPaths() {
  // const properties = DummyData.properties
  const properties = await propertyApi.getAll();

  return properties.map(el => {
    return { params: { id: el.id }, props: el };
  });
}
---

<LandingLayout>
  <SearchBar client:load client:only='vue' />
  <div class='flex flex-wrap px-[3%] w-auto justify-center pb-[7%]'>
    <div class='flex justify-start items-center flex-wrap w-auto'>
      {
        properties.map((property: PropertyModel) => (
          <PropertyCard property={property} />
        ))
      }
    </div>
  </div>
</LandingLayout>
